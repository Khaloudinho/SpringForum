<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<body>
<section class="section" layout:fragment="content">
  <div class="container">
    <h1 class="title" th:text="#{topic}"></h1>
    <h2 class="subtitle" th:text="${topic.title}"></h2>
    <a class="button is-link" th:text="#{topic.return}"
       th:href="@{'/topic/'+${topic.id}}"></a>
    <fieldset class="section">
      <legend th:text="#{topic.general_info}"></legend>
      

        <div class="field">
          <label class="label" th:text="#{topic.title}">Label</label>
          <div class="control">
            <input class="input" type="text" th:value="${topic.title}"/>
          </div>
          <p class="help">This is a help text</p>
        </div>


        <div class="field">
          <div class="control">
            <input type="checkbox" th:checked="${topic.anonymousCanAccess}">
            <label class="checkbox" th:text="#{authorizeAnonymousAccess}">
            </label>
          </div>
        </div>

    </fieldset>

    <fieldset class="section">
      <legend th:text="#{topic.permission_info}"></legend>
      <div class="columns">
        <div class="column is-one-third">
          <input id="idTopic" type="hidden" th:value="${topic.id}"/>
          <div class="control">
            <div class="select">
              <select id="selectPermission">
                <option value="READ">Lecture</option>
                <option value="WRITE">Ecriture</option>
                <option value="ALL">Tout</option>
              </select>
            </div>
          </div>
        </div>

        <div class="column">
          <div class="control">
            <div class="select">
              <select id="selectUser">

                        <option  th:each="user : ${users}"
                                 th:value="${user.id}"
                                th:text="${user.username}"></option>

              </select>
            </div>
          </div>
        </div>
        <div class="column">
          <div class="control">
            <button class="button is-primary" onclick="addPermissionTopic()"
                    th:text="#{topic.submit}"></button>
          </div>
        </div>
      </div>
    </fieldset>


    <fieldset class="section">
      <legend th:text="#{permissions}"> Recap des droits</legend>

      <div class="columns">
        <div class="column is-half">
          <aside class="menu">
            <p class="menu-label" th:text="#{read}">
              Reader
            </p>
            <ul id="listReaderUsers" class="menu-list">
                <span th:each="user : ${usersReader}">
             
                        <div th:id="@{{id}Reader(id=${user.id})}" class="notification" >
                            <button class="delete" th:id="${user.id}" onclick="deletePermissionTopic(this.id,'READ')"></button>
                            <span th:text="${user.username}"></span>
                         </div>
                </span>
            </ul>
          </aside>
        </div>
        <div class="column">
          <aside class="menu">
            <p class="menu-label" th:text="#{write}">
              Writer
            </p>
            <ul id="listWriterUsers" class="menu-list">
                 <span th:each="user : ${usersWriter}">  
                        <div th:id="@{{id}Writer(id=${user.id})}" class="notification" >
                            <button class="delete" th:id="${user.id}" onclick="deletePermission(this.id,'WRITE')"></button>
                            <span th:text="${user.username}"></span>
                        </div>
                </span>
            </ul>
          </aside>
        </div>
      </div>
    </fieldset>
  </div>
</section>
</body>
</html>
